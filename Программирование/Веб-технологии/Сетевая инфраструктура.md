---
tags:
  - Программирование
  - ВебОсновы
  - "#СетеваяИнфрастуктура"
Связанные темы:
---
# **Сетевая инфраструктура**
---
### **На этой странице кратко описаны ключевые компоненты инфраструктуры, для более подробной информации читайте ссылки ниже**:
- [[Веб-сервер (Nginx)]]
- [[Балансировщик нагрузки]]
- [[Системы кэширования (Redis)]]
- [[Очереди сообщений (Kafka)]]
- [[Контейнеризация (Docker)]]

---
## **1. Веб-сервер (Nginx)**
**Назначение:**
- Обработка HTTP-запросов и обслуживание клиентов
- Высокопроизводительный прокси-сервер

**Основные функции:**
```nginx
# Обслуживание статики:
server {
    root /var/www/html;
    location /static/ {
        expires 30d;
    }
}

# Проксирование на бэкенд:
location /api/ {
    proxy_pass http://backend:8080;
    proxy_set_header Host $host;
}
```

**Ключевые возможности:**
- Раздача статических файлов (CSS, JS, изображения)
- SSL-терминация (завершение HTTPS-соединений)
- Балансировка нагрузки (upstream)
- Кэширование ответов
- Ограничение частоты запросов (rate limiting)

Подробнее: [[Веб-сервер (Nginx)]]

---

## **2. Балансировщик нагрузки**
**Назначение:**
- Распределение трафика между несколькими инстансами приложения
- Обеспечение отказоустойчивости и масштабируемости

**Алгоритмы балансировки:**
```nginx
upstream backend {
    # Round Robin (по умолчанию)
    server backend1.example.com;
    server backend2.example.com;
    
    # Least Connections
    least_conn;
    server backend3.example.com;
    
    # IP Hash (постоянство сессии)
    ip_hash;
    server backend4.example.com;
}
```

**Типы балансировщиков:**
- **L4 (Transport layer)**: Балансировка на основе IP/порта
- **L7 (Application layer)**: Балансировка на основе HTTP-заголовков

**Преимущества:**
- Автоматическое исключение неработающих нод
- Равномерное распределение нагрузки
- Возможность blue-green деплоя

Подробнее: [[Балансировщик нагрузки]]

---

## **3. Системы кэширования (Redis)**
**Назначение:**
- Хранение часто запрашиваемых данных в памяти
- Уменьшение нагрузки на базу данных

**Основные сценарии использования:**
```go
// Кэширование результатов запросов
func GetUser(userID int) (*User, error) {
    cacheKey := fmt.Sprintf("user:%d", userID)
    
    // Попытка получить из кэша
    if cached, err := redis.Get(cacheKey); err == nil {
        return parseUser(cached)
    }
    
    // Получение из БД и сохранение в кэш
    user := fetchFromDB(userID)
    redis.SetEx(cacheKey, user.ToJSON(), 5*time.Minute)
    return user, nil
}
```

**Типы данных Redis:**
- Strings: кэширование простых значений
- Hashes: объекты с полями
- Lists/Sets: очереди и уникальные значения
- Sorted Sets: ранжированные данные

Подробнее: [[Системы кэширования (Redis)]]

---

## **4. Очереди сообщений (Kafka)**
**Назначение:**
- Асинхронная обработка задач и событий
- Decoupling компонентов системы

**Архитектура:**
```bash
# Producer -> Topic -> Consumer Groups
# Сообщения сохраняются и могут быть повторно обработаны
```

**Основные понятия:**
- **Topics**: логические каналы для сообщений
- **Partitions**: параллельная обработка внутри топика
- **Consumer Groups**: группы потребителей для масштабирования

**Сценарии использования:**
- Обработка фоновых задач (отправка email, нотификации)
- Сбор и обработка логов
- Стриминг данных между микросервисами

Подробнее: [[Очереди сообщений (Kafka)]]

---

## **5. Контейнеризация (Docker)**
**Назначение:**
- Изоляция приложений и их зависимостей
- Упрощение деплоя и масштабирования

**Базовые команды:**
```dockerfile
# Dockerfile пример:
FROM golang:1.21-alpine
WORKDIR /app
COPY go.mod ./
RUN go mod download
COPY *.go ./
RUN go build -o /myapp
EXPOSE 8080
CMD ["/myapp"]
```

**Ключевые преимущества:**
- Единая среда для разработки и продакшена
- Быстрое развертывание и масштабирование
- Изоляция зависимостей и ресурсов
- Эффективное использование ресурсов

**Экосистема:**
- Docker Compose: оркестрация многоконтейнерных приложений
- Docker Swarm/Kubernetes: управление кластерами контейнеров

Подробнее: [[Контейнеризация (Docker)]]

---

## **Сравнительная таблица компонентов**

| Компонент | Назначение | Протоколы | Основные продукты |
|-----------|------------|-----------|-------------------|
| Веб-сервер | Обслуживание HTTP | HTTP/HTTPS | Nginx, Apache |
| Балансировщик | Распределение нагрузки | L4/L7 | Nginx, HAProxy, AWS ALB |
| Кэш | Ускорение доступа к данным | Redis protocol | Redis, Memcached |
| Очереди | Асинхронная обработка | AMQP, Kafka protocol | RabbitMQ, Kafka |
| Контейнеры | Изоляция приложений | Docker API | Docker, containerd |

---