---
tags:
  - Программирование
---
# Клиент-серверная архитектура

## Основные принципы

Клиент-серверная модель — фундаментальный подход к организации распределённых систем, где:
- **Клиент** инициирует запросы (браузер, мобильное приложение, IoT-устройство)
- **Сервер** обрабатывает запросы и возвращает ответы (веб-сервер, API, облачные функции)

### Ключевые характеристики:
1. **Асимметрия ролей**:
   - Клиент всегда инициатор взаимодействия
   - Сервер ожидает и обрабатывает запросы

2. **Сетевое взаимодействие**:
   - Общение через стандартные протоколы (HTTP, WebSocket, gRPC)
   - Физическое разделение компонентов

3. **Масштабируемость**:
   - Возможность горизонтального масштабирования серверов
   - Независимое обновление клиентской и серверной частей

## Компоненты архитектуры

### Клиентская часть
**Типы клиентов**:
- **Тонкие клиенты** (браузеры, терминалы) — минимальная логика
- **Толстые клиенты** (нативные приложения) — сложная бизнес-логика
- **Промежуточные** (PWA, гибридные приложения)

**Ответственность**:
- Пользовательский интерфейс
- Валидация ввода
- Кэширование данных
- Обработка пользовательских событий

### Серверная часть
**Типы серверов**:
- **Веб-серверы** (Nginx, Apache) — статика и проксирование
- **Прикладные серверы** (Node.js, Django, Spring) — бизнес-логика
- **Серверы данных** (PostgreSQL, MongoDB) — хранение информации

**Ответственность**:
- Обработка запросов
- Управление данными
- Безопасность и аутентификация
- Оптимизация производительности

## Варианты взаимодействия

### Stateless (HTTP)
- Каждый запрос независим
- Сервер не хранит состояние между запросами
- Пример: REST API

```http
GET /api/users/123 HTTP/1.1
Authorization: Bearer xyz123
```

### Stateful (WebSocket)
- Долговременное соединение
- Сервер сохраняет состояние
- Пример: чат-приложения

```javascript
const socket = new WebSocket('wss://example.com/chat');
socket.send('Hello server!');
```

## Многоуровневые архитектуры

### Трёхуровневая модель
1. **Презентационный уровень** (клиент)
2. **Бизнес-логика** (сервер приложений)
3. **Уровень данных** (СУБД)

### Современные вариации
- **Микросервисы** (разделение по функциям)
- **Serverless** (FaaS — функции как сервис)
- **Edge computing** (обработка на периферии сети)

## Реализация в веб-разработке

### Клиентские технологии
```html
<!-- HTML5 -->
<button id="loadData">Загрузить</button>

<script>
// JavaScript
document.getElementById('loadData').addEventListener('click', async () => {
  const response = await fetch('/api/data');
  const data = await response.json();
  console.log(data);
});
</script>
```

### Серверные технологии (на примере Go)
```go
package main

import (
	"fmt"
	"net/http"
)

func handler(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, "Привет, клиент!")
}

func main() {
	http.HandleFunc("/", handler)
	http.ListenAndServe(":8080", nil)
}
```

## Оптимизация архитектуры

### Кэширование
- **Клиентское**: LocalStorage, Service Workers
- **Серверное**: Redis, Memcached
- **Промежуточное**: CDN, прокси-кэши

### Балансировка нагрузки
- **Аппаратные решения** (F5)
- **Программные** (Nginx, HAProxy)
- **DNS-балансировка**

### Безопасность
- HTTPS для шифрования
- CORS политики
- Валидация входящих данных
- Rate limiting

## Паттерны взаимодействия

1. **Запрос-ответ** (HTTP REST)
2. **Публикация-подписка** (WebSocket, SSE)
3. **Очереди сообщений** (RabbitMQ, Kafka)
4. **Удалённый вызов процедур** (gRPC)

## Проблемы и решения

| Проблема | Решения |
|----------|---------|
| Высокая нагрузка | Горизонтальное масштабирование, кэширование |
| Сложность отладки | Логирование, трассировка запросов |
| Несовместимость версий | API versioning, адаптеры |
| Задержки сети | Оптимизация запросов, CDN |

## Эволюция архитектуры

1. **Монолиты** (единое приложение)
2. **Многоуровневые системы**
3. **Сервис-ориентированные (SOA)**
4. **Микросервисы**
5. **Событийно-ориентированные**
6. **Serverless**

## Будущее развития

- **Умные клиенты** (больше логики на стороне клиента)
- **Edge computing** (обработка ближе к пользователю)
- **WebAssembly** (высокопроизводительные клиенты)
- **Гибридные модели** (JAMstack, Islands Architecture)