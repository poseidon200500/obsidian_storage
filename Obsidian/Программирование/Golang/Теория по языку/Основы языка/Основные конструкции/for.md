---
tags:
  - Программирование
  - Теория_по_языку_Golang
  - Основы_языка_Golang
Связанные темы: []
---
# `for` в Golang

## Теория
В Go существует только одна циклическая конструкция — `for`, которая может использоваться в трёх основных вариантах:

#### **1. Классический цикл (счётчик)**
Аналогичен `for` в C/C++/Java:
```go
for инициализация; условие; пост-операция {
    // тело цикла
}
```
#### **2. Цикл с единственным условием (аналог `while`)**
```go
for условие {
    // тело цикла
}
```
#### **3. Бесконечный цикл**
```go
n := 0
for {
    if n == 3 {
        break
    }
    fmt.Println(n)  // 0, 1, 2
    n++
}
```
#### **4. Итерация по коллекциям (`range`)**
Отдельный синтаксис для перебора элементов:
```go
for индекс, значение := range коллекция {
    // тело цикла
}
```

## **Важные особенности**

1. **Область видимости переменных**  
    Переменная, объявленная в инициализации цикла, видна только внутри блока `for`:
    ```go
    for i := 0; i < 3; i++ {
    fmt.Println(i)  // OK
}
fmt.Println(i)  // Ошибка: i не определена
```
2. **Пропуск компонентов**  
Можно опускать любые части классического `for`:
```go
i := 0
for ; i < 3; i++ { /* ... */ }  // пропущена инициализация
for i := 0; i < 3; { /* ... */ } // пропущено обновление
```
3. **Использование `break` и `continue`**
- `break` — досрочный выход из цикла
- `continue` — переход к следующей итерации
```go
for i := 0; i < 5; i++ {
    if i == 2 { continue }  // пропуск 2
    if i == 4 { break }     // выход на 4
    fmt.Println(i)  // 0, 1, 3
}
```
4. **Метки для вложенных циклов**  
Позволяют управлять внешними циклами из вложенных:
outer:
```go
for i := 0; i < 3; i++ {
    for j := 0; j < 3; j++ {
        if i*j == 4 {
            break outer  // выход из обоих циклов
        }
    }
}
```

## **Типичные ошибки**

1. **Изменение слайса во время итерации**
    ```go
    nums := []int{1, 2, 3}
    for _, num := range nums {
        nums = append(nums, num*2)  // Риск бесконечного цикла!
    }
    ```
2. **Игнорирование индекса в `range`**  
Используйте `_` для пропуска ненужных значений:
```go
    for _, value := range values { /* ... */ }
```  
3. **Пустой `for` без выхода**
```go
    for {  // Бесконечный цикл без break
        // ...
    }
```

