---
tags:
  - Программирование
  - Рабочие_темы_Golang
  - Тестирование
---
### **Тестирование в Golang**  
*Го предоставляет мощные инструменты для тестирования, включая встроенный пакет `testing` и сторонние библиотеки.*  

---

#### **1. Юнит-тесты (Unit Tests)**  
**Что тестируют:**  
- Отдельные функции или методы  
- Логику изолированно от внешних зависимостей  

**Особенности:**  
- Файлы с суффиксом `_test.go`  
- Функции вида `TestXxx(*testing.T)`  

**Пример:**  
```go
func TestAdd(t *testing.T) {
    result := Add(2, 3)
    if result != 5 {
        t.Errorf("Expected 5, got %d", result)
    }
}
```  
Подробнее: [[Юнит-тестирование в Go]]  

---

#### **2. Интеграционные тесты**  
**Что тестируют:**  
- Взаимодействие компонентов  
- Работу с БД, API, файловой системой  

**Особенности:**  
- Требуют настройки окружения  
- Используют тестовые базы данных/моки  

**Пример:**  
```go
func TestUserRepository_Save(t *testing.T) {
    db := setupTestDB()
    repo := NewUserRepository(db)
    
    err := repo.Save(&User{Name: "Alice"})
    if err != nil {
        t.Fatal(err)
    }
}
```  
Подробнее: [[Интеграционные тесты в Go]]  

---

#### **3. Табличные тесты (Table-Driven Tests)**  
**Что тестируют:**  
- Множество сценариев для одной функции  

**Особенности:**  
- Тест-кейсы в слайсе структур  
- Удобно для покрытия edge-cases  

**Пример:**  
```go
func TestCalculate(t *testing.T) {
    tests := []struct {
        a, b int
        want int
    }{
        {1, 2, 3},
        {0, 0, 0},
        {-1, 1, 0},
    }

    for _, tt := range tests {
        if got := Calculate(tt.a, tt.b); got != tt.want {
            t.Errorf("Calculate(%d, %d) = %d; want %d", tt.a, tt.b, got, tt.want)
        }
    }
}
```  
Подробнее: [[Табличные тесты в Go]]  

---

#### **4. Моки и стабы**  
**Библиотеки:**  
- `testify/mock`  
- `gomock`  
- Встроенные интерфейсы  

**Пример:**  
```go
type DBMock struct {
    mock.Mock
}

func (m *DBMock) Get(id int) (string, error) {
    args := m.Called(id)
    return args.String(0), args.Error(1)
}

func TestService_GetUser(t *testing.T) {
    mockDB := new(DBMock)
    mockDB.On("Get", 1).Return("Alice", nil)

    service := NewService(mockDB)
    name, err := service.GetUser(1)
    // Проверки...
}
```  
Подробнее: [[Моки в Go]]  

---

#### **5. Бенчмарки (Benchmark Tests)**  
**Что тестируют:**  
- Производительность кода  

**Особенности:**  
- Функции вида `BenchmarkXxx(*testing.B)`  
- Запуск: `go test -bench=.`  

**Пример:**  
```go
func BenchmarkFibonacci(b *testing.B) {
    for i := 0; i < b.N; i++ {
        Fibonacci(20)
    }
}
```  
Подробнее: [[Бенчмарки в Go]]  

---

#### **6. Примеры (Example Tests)**  
**Что тестируют:**  
- Документирование работы кода  

**Особенности:**  
- Проверяют вывод в stdout  
- Отображаются в godoc  

**Пример:**  
```go
func ExampleHello() {
    fmt.Println(Hello("world"))
    // Output: Hello world
}
```  
Подробнее: [[Примеры в Go]]  

---

#### **7. Покрытие кода (Code Coverage)**  
**Как использовать:**  
```bash
go test -cover
go test -coverprofile=coverage.out
go tool cover -html=coverage.out
```  
Подробнее: [[Покрытие кода в Go]]  

---

### **Рекомендации**  
1. Тестируйте публичный API, а не реализацию  
2. Стремитесь к 70-80% покрытия  
3. Избегайте тестов, зависимых от порядка выполнения  

**См. также:**    
- [[Лучшие практики тестирования]]