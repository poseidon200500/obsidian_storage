---
tags:
  - ВебОсновы
  - HTTP
  - Программирование
---
# Методы HTTP-запросов

## Основные методы

### GET
**Назначение**: Получение представления ресурса  
**Характеристики**:
- Идемпотентный (многократный вызов дает одинаковый результат)
- Безопасный (не изменяет состояние ресурса)
- Кешируемый
- Параметры передаются в URL (?query=value)

**Пример использования**:
```http
GET /api/users/123 HTTP/1.1
Host: example.com
```

**Типовые ответы**:
- 200 OK (успешное выполнение)
- 404 Not Found (ресурс не существует)
- 304 Not Modified (кеш актуален)

### POST
**Назначение**: Создание ресурса или обработка данных  
**Характеристики**:
- Не идемпотентный
- Содержит тело запроса
- Может иметь побочные эффекты

**Пример использования**:
```http
POST /api/users HTTP/1.1
Host: example.com
Content-Type: application/json

{"name": "John", "email": "john@example.com"}
```

**Типовые ответы**:
- 201 Created (ресурс создан)
- 400 Bad Request (неверный запрос)
- 409 Conflict (конфликт данных)

### PUT
**Назначение**: Полное обновление ресурса  
**Характеристики**:
- Идемпотентный
- Заменяет весь ресурс
- Должен содержать полное представление

**Пример использования**:
```http
PUT /api/users/123 HTTP/1.1
Host: example.com
Content-Type: application/json

{"id": 123, "name": "John", "email": "new@example.com"}
```

**Типовые ответы**:
- 200 OK (успешное обновление)
- 204 No Content (обновление без возвращаемого тела)
- 404 Not Found (ресурс не существует)

### DELETE
**Назначение**: Удаление ресурса  
**Характеристики**:
- Идемпотентный
- Может не иметь тела запроса
- Удаление может быть логическим или физическим

**Пример использования**:
```http
DELETE /api/users/123 HTTP/1.1
Host: example.com
```

**Типовые ответы**:
- 204 No Content (успешное удаление)
- 202 Accepted (удаление принято в обработку)
- 404 Not Found (ресурс не существует)

### PATCH
**Назначение**: Частичное обновление ресурса  
**Характеристики**:
- Не идемпотентный (в общем случае)
- Содержит только изменяемые поля
- Может использовать различные форматы патчей

**Пример использования**:
```http
PATCH /api/users/123 HTTP/1.1
Host: example.com
Content-Type: application/json-patch+json

[{"op": "replace", "path": "/email", "value": "new@example.com"}]
```

**Типовые ответы**:
- 200 OK (успешное обновление)
- 422 Unprocessable Entity (неверный формат патча)
- 409 Conflict (конфликт при обновлении)

## Дополнительные методы

### HEAD
**Назначение**: Получение метаинформации о ресурсе  
**Особенности**:
- Аналогичен GET, но без тела ответа
- Полезен для проверки существования ресурса
- Используется для проверки модификации (Last-Modified, ETag)

**Пример использования**:
```http
HEAD /api/users/123 HTTP/1.1
Host: example.com
```

### OPTIONS
**Назначение**: Определение поддерживаемых методов и возможностей  
**Особенности**:
- Возвращает Allow с доступными методами
- Используется для CORS preflight-запросов

**Пример использования**:
```http
OPTIONS /api/users HTTP/1.1
Host: example.com
```

**Типовой ответ**:
```http
HTTP/1.1 200 OK
Allow: GET, POST, OPTIONS
Access-Control-Allow-Methods: GET, POST
```

### TRACE
**Назначение**: Диагностика и отладка  
**Особенности**:
- Возвращает полученный запрос
- Может быть отключен из соображений безопасности
- Полезен для проверки промежуточных прокси

**Пример использования**:
```http
TRACE /api/users HTTP/1.1
Host: example.com
```

## Сравнительная таблица методов

| Метод    | Идемпотентный | Безопасный | Тело запроса | Тело ответа | Кешируемый |
|----------|--------------|------------|--------------|-------------|------------|
| GET      | Да           | Да         | Нет          | Да          | Да         |
| POST     | Нет          | Нет        | Да           | Да          | Нет        |
| PUT      | Да           | Нет        | Да           | Да/Нет      | Нет        |
| DELETE   | Да           | Нет        | Нет/Да       | Нет         | Нет        |
| PATCH    | Нет*         | Нет        | Да           | Да          | Нет        |
| HEAD     | Да           | Да         | Нет          | Нет         | Да         |
| OPTIONS  | Да           | Да         | Нет          | Да          | Нет        |
| TRACE    | Да           | Да         | Нет          | Да          | Нет        |

*PATCH может быть идемпотентным при определенной реализации

## Лучшие практики использования

1. **GET**:
   - Используйте только для чтения данных
   - Не передавайте конфиденциальные данные в URL
   - Учитывайте ограничения длины URL

2. **POST**:
   - Для создания подчиненных ресурсов
   - Когда результат не является идентифицируемым ресурсом
   - Для операций с побочными эффектами

3. **PUT**:
   - Для полной замены ресурса
   - Когда клиент определяет URI ресурса
   - Требуйте полного представления ресурса

4. **DELETE**:
   - Для удаления идентифицируемых ресурсов
   - Может возвращать 200 с телом или 204 без тела

5. **PATCH**:
   - Для частичных обновлений
   - Четко документируйте формат патчей
   - Рассмотрите JSON Patch или JSON Merge Patch

## Частые ошибки

1. Использование GET для операций с побочными эффектами
2. Применение PUT для частичных обновлений
3. Игнорирование идемпотентности при проектировании API
4. Отсутствие заголовка Allow в ответах на OPTIONS
5. Неправильная обработка HEAD запросов (должна совпадать с GET)